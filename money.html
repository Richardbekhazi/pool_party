<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pool Party • Money</title>

  <link rel="icon" href="assets/favicon.ico" sizes="any">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/pages.css">

  <script src="js/nav.js" defer></script>

  <!-- Auth -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/nav-auth.js"></script>
  <script type="module" src="js/guard.js"></script>

  <!-- Page logic -->
  <script src="js/render_attendees.js" defer></script>
  <script src="js/sortable.js" defer></script>
  <script src="js/ticker.js" defer></script>
  
  <!-- NEW: Auto-calculate stats from table data -->
  <script src="js/stats.js" defer></script>
</head>
<body>
  <main class="wrap">
    <article class="card">
      <header>
        <div class="titleblock">
          <h1>Money</h1>
          <p class="subhead">Contributions & Logistics</p>
        </div>
        <div class="header-actions"></div>
      </header>

      <div class="content">
        
        <!-- At-a-glance Stats Dashboard -->
        <section class="stats-overview">
          <div class="stat-card">
            <span class="stat-label">Total Pool</span>
            <span class="stat-value" id="statTotal">$0</span>
          </div>
          <div class="stat-card">
            <span class="stat-label">Confirmed Guests</span>
            <span class="stat-value" id="statCount">0</span>
          </div>
        </section>

        <section class="table-wrap">
          <table aria-label="Contacts list" id="contacts-table">
            <thead>
              <tr>
                <th class="idx sortable" data-type="number" aria-sort="none">#</th>
                <th class="sortable" data-type="text" aria-sort="none">Name</th>
                <th class="sortable" data-type="money" aria-sort="none">Fee</th>
                <th class="sortable" data-type="text" aria-sort="none">Meal</th>
                <th class="sortable" data-type="phone" aria-sort="none">Phone</th>
              </tr>
            </thead>
            <tbody>
              <!-- Skeleton Loading State -->
              <tr class="skeleton-row">
                <td class="idx"><div class="sk-blob"></div></td>
                <td><div class="sk-line long"></div></td>
                <td><div class="sk-line short"></div></td>
                <td><div class="sk-line medium"></div></td>
                <td><div class="sk-line medium"></div></td>
              </tr>
              <tr class="skeleton-row">
                <td class="idx"><div class="sk-blob"></div></td>
                <td><div class="sk-line long"></div></td>
                <td><div class="sk-line short"></div></td>
                <td><div class="sk-line medium"></div></td>
                <td><div class="sk-line medium"></div></td>
              </tr>
              <tr class="skeleton-row">
                <td class="idx"><div class="sk-blob"></div></td>
                <td><div class="sk-line long"></div></td>
                <td><div class="sk-line short"></div></td>
                <td><div class="sk-line medium"></div></td>
                <td><div class="sk-line medium"></div></td>
              </tr>
            </tbody>
          </table>
        </section>
      </div>

      <footer>
        <div class="ticker">
          <div class="ticker-viewport">
            <div class="ticker-track">
              <div class="pass">
                <span class="ticker-item">Financials</span>
                <span class="ticker-sep">✦</span>
                <span class="ticker-item">Syncing latest payments...</span>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </article>
  </main>
</body>
</html>